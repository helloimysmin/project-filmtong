<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="Anime Template">
<meta name="keywords" content="Anime, unica, creative, html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>FilmTong</title>
<%@ include file="/WEB-INF/views/common/css_views-all.jsp"%>
</head>
<body>
<%@include file="/WEB-INF/views/common/header_views-all.jsp" %>
<!-- Product Section Begin -->
<section class="product speed">
	<div class="container">
		<div class="row">
			<div class="col-lg-8">
				<div class="trending__product">
					<div class="row">
						<div class="col-lg-8 col-md-8 col-sm-8">
							<div class="section-title">
								<h4>HALL OF FAME MOVIE</h4>
								<div id="totalMovie">반갑습니다.</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-4">
							<div class="btn__all">					
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">								
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">	
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
					<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
					<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
							<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
							<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
					<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
							<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">							
									<p class="mvTitle"></p>
										<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="recent__product">
					<div class="row">
						<div class="col-lg-8 col-md-8 col-sm-8"></div>
						<div class="col-lg-4 col-md-4 col-sm-4"></div>
					</div>
					<div class="row">
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic" style="background-size: cover">x`	
									<div class="view">
										<i class="fa fa-eye"></i>
									</div>
								</div>
								<div class="product__item__text">
									<p class="mvTitle"></p>
									<ul>
										<li></li>
									</ul>
									<div class="comment">
										<i class="fa fa-comments"></i>
									</div>
								</div>
							</div>
						</div>
						<div class="paginate-container" data-html-cleaner-suppress-children="">
							<div class="BtnGroup" data-test-selector="pagination">
	    		 		 	<button rel="nofollow" class="btnnav important btnnav-outline important BtnGroup-item" id="prev10" onclick="pageScroll(-10)"> &lt;&lt; </button>
							<button rel="nofollow" class="btnnav important btnnav-outline important BtnGroup-item" id="prev" onclick="pageScroll(-1)" >PREV</button>
							<button rel="nofollow" class="btnnav important btnnav-outline important BtnGroup-item" id="next" onclick="pageScroll(1)">NEXT</button>
							<button rel="nofollow" class="btnnav important btnnav-outline important BtnGroup-item" id="next10" onclick="pageScroll(10)"> &gt;&gt; </button>			
							</div>
   		   		  		</div>
   		   		  		<div id="numCheck"></div>
					</div>
			  </div>
			</div>
		</div>
	</div>
</section>
<!-- Product Section End -->
<%@include file="/WEB-INF/views/common/footer.jsp" %>
<%@include file="/WEB-INF/views/common/js_common.jsp" %>
<script>
window.onload = function() {
	pageScroll(); 
	searchMovies();
}
let num = 1;
let totalPage = 0;
function pageScroll(page) {
	if(page<0 && num==1){
		return;
	}
	if(page>0 && num==totalPage){
		return;
	}
	if(page){
		num += page;
	}
	const itemPics = document.querySelectorAll('.product__item__pic');	//pageSize를 item__pic 갯수에 맞추기 위해서 미리 선언	
	for(let i=0; i<itemPics.length; i++) { 								//마지막 페이지에 없는건 안찍기 위해 초기화
		itemPics[i].style.backgroundImage = 'none';
		itemPics[i].setAttribute('onclick', "null");
		document.querySelectorAll('.comment')[i].innerHTML = '';
		document.querySelectorAll('.view')[i].innerHTML = '';
		document.querySelectorAll('.mvTitle')[i].innerHTML = '';
		document.querySelectorAll('.product__item__text li')[i].innerHTML = '';
	}
	fetch('/hofMovies-scroll?pageNum=' + num + '&pageSize=' + itemPics.length + '&title=${param.title}' + '&name=${param.name}')
	.then(function(res) {
		return res.json();
	})
	.then(function(data) {	
		totalPage = data.pages;
		if(num<0) num = 1;
		if(num>totalPage) num = totalPage;
		document.querySelector("#totalMovie").innerHTML = "보여지는 영화는 " + data.total + " 건입니다." ;
		for(let i=0; i<data.size; i++) {
			itemPics[i].style.backgroundImage = "url('https://image.tmdb.org/t/p/original" + data.list[i].posterPath + "')";	
			itemPics[i].setAttribute('onclick', "location.href=\'/views/movie-trailer?id=" + data.list[i].id + "'");
			document.querySelectorAll('.comment')[i].innerHTML = data.list[i].name;
			document.querySelectorAll('.view')[i].innerHTML = data.list[i].voteAverage + '점';
			document.querySelectorAll('.mvTitle')[i].innerHTML = data.list[i].title;
			document.querySelectorAll('.product__item__text li')[i].innerHTML = data.list[i].originalTitle;
		}
		document.querySelector('#numCheck').innerHTML= num + ' / ' + data.pages;
	});
}
</script>
</body>
</html>